$(function() {
  $("#testAPIAjax").on("click", function(e) {
    e.preventDefault();  // デフォルトのイベント(ページの遷移やデータ送信など)を無効にする
    $.ajax({
      url: $(this).attr("action"),  // リクエストを送信するURLを指定（action属性のurlを抽出）
      type: "POST",  // HTTPメソッドを指定（デフォルトはGET）
      data: {
        note: $("#note").val()  // 送信データ
      }
    })
    .done(function(data) {
      $(".notes").append(`<div>${data}</div>`);  // HTMLを追加
      $("#result_ajax").val("");  // 入力欄を空にする
    })
    .fail(function() {
      alert("error!");  // 通信に失敗した場合の処理
    })
  });
});
